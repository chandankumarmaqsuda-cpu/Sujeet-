<!DOCTYPE html>
<html lang="hi">
<head><!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Good Bye Hydrabad ‚Äì Smooth Neon</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}
body{background:#000;color:#fff;height:100vh;overflow:hidden}

/* VIDEO BG */
#bg{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:.6;
  z-index:-5;
}

/* THUMBNAIL OVERLAY */
#thumb{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-4;
}

/* NEON */
.neon{
  position:fixed;
  top:0;
  width:6px;
  height:100%;
  filter:blur(5px);
  z-index:10;
}
.left{left:0}
.right{right:0}

/* BORDER */
.border{
  position:fixed;
  inset:0;
  border:2px solid transparent;
  pointer-events:none;
  z-index:9;
}

/* BOX */
.box{
  position:fixed;
  top:8px;
  left:50%;
  transform:translateX(-50%);
  width:94%;
  max-width:720px;
  background:rgba(0,0,0,.6);
  border-radius:18px;
  padding:14px;
  text-align:center;
  z-index:20;
}

h2{font-size:24px}
#timer{margin:6px 0;font-size:15px}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:center;
  margin-top:8px;
}

button,input[type=range]{
  padding:10px 16px;
  border:none;
  border-radius:30px;
  background:#ff9800;
  font-weight:bold;
  cursor:pointer;
}

input[type=range]{width:120px}

#secret{
  display:none;
  margin-top:10px;
  color:#ffb74d;
}
</style>
</head>

<body>

<video id="bg" muted loop playsinline preload="metadata">
  <source src="ek-mulakat-jaruri-hai-sanam.mp4">
</video>

<!-- auto thumbnail -->
<img id="thumb">

<div class="neon left"></div>
<div class="neon right"></div>
<div class="border"></div>

<div class="box">
  <h2 id="title"></h2>
  <div id="timer"></div>

  <div class="controls">
    <button id="btn">‚ñ∂Ô∏è Play</button>
    <button id="record">‚¨áÔ∏è Download</button>
    <button onclick="location.reload()">üîÅ Restart</button>
  </div>

  <div class="controls">
    <input type="range" id="vol" min="0" max="1" step="0.01" value="1">
  </div>

  <div id="secret">üíå Hydrabad sirf shehar nahi‚Ä¶ ek jazba tha</div>
</div>

<audio id="music" loop>
  <source src="ghar-more-pardesiya.mp3">
</audio>

<script>
/* ===== AUTO THUMBNAIL FROM 2s ===== */
const video=document.getElementById("bg");
const thumb=document.getElementById("thumb");

video.addEventListener("loadedmetadata",()=>{
  const seekTime=Math.min(2,video.duration-0.2);
  video.currentTime=seekTime;
});

video.addEventListener("seeked",()=>{
  const c=document.createElement("canvas");
  c.width=video.videoWidth;
  c.height=video.videoHeight;
  c.getContext("2d").drawImage(video,0,0,c.width,c.height);
  thumb.src=c.toDataURL("image/jpeg",0.85);
});

/* ===== TEXT TYPE ===== */
const text="üíî Goog Bye Hydrabad üíî";
let ti=0;
(function type(){
  if(ti<text.length){
    title.innerHTML+=text[ti++];
    setTimeout(type,120);
  }
})();

/* ===== TIMER ===== */
const target=new Date("Feb 22 2026").getTime();
setInterval(()=>{
  const d=target-Date.now();
  timer.innerHTML=d<=0?"üåÜ ‡§Ö‡§¨ ‡§Ö‡§≤‡§µ‡§ø‡§¶‡§æ Now I'm on my way‚Ä¶":
  Math.floor(d/864e5)+" ‡§¶‡§ø‡§® "+
  Math.floor(d/36e5)%24+" ‡§ò‡§Ç‡§ü‡•á "+
  Math.floor(d/6e4)%60+" ‡§Æ‡§ø‡§®‡§ü "+
  Math.floor(d/1000)%60+" ‡§∏‡•á‡§ï‡§Ç‡§°";
},1000);

/* ===== AUDIO + ANALYSER ===== */
const music=document.getElementById("music");
vol.oninput=()=>music.volume=vol.value;

const ctx=new (window.AudioContext||webkitAudioContext)();
const src=ctx.createMediaElementSource(music);
const analyser=ctx.createAnalyser();
src.connect(analyser);
analyser.connect(ctx.destination);
analyser.fftSize=64;
const data=new Uint8Array(analyser.frequencyBinCount);

const neonL=document.querySelector(".left");
const neonR=document.querySelector(".right");
const border=document.querySelector(".border");

let lastV=0,beats=0,unlock=false;
let lastShadow=0;
let recording=false;
let running=false;

/* ===== MID VIBRATION ===== */
function midVibrate(power){
  if(!navigator.vibrate) return;
  const now=Date.now();
  if(now-lastV<350) return;
  if(power>95) navigator.vibrate(20);
  lastV=now;
}

/* ===== NEON LOOP (30 FPS) ===== */
function visual(){
  if(!running) return;

  analyser.getByteFrequencyData(data);
  let sum=0;
  for(let i=0;i<data.length;i++) sum+=data[i];
  const avg=sum/data.length;

  const maxPower=recording?70:110;
  const power=Math.min(avg*1.1,maxPower);

  const hue=(Date.now()/35)%360;
  const color=`hsl(${hue},100%,60%)`;

  neonL.style.background=color;
  neonR.style.background=color;

  const now=Date.now();
  if(now-lastShadow>120){
    neonL.style.boxShadow=`0 0 ${power}px ${color}`;
    neonR.style.boxShadow=`0 0 ${power}px ${color}`;
    border.style.borderColor=color;
    border.style.boxShadow=`0 0 ${power/1.4}px ${color}`;
    lastShadow=now;
  }

  midVibrate(power);

  if(power>95) beats++;
  if(beats>8 && !unlock){
    secret.style.display="block";
    unlock=true;
    navigator.vibrate([40,20,40]);
  }

  setTimeout(visual,33);
}

/* ===== PLAY / PAUSE ===== */
btn.onclick=()=>{
  if(!running){
    ctx.resume();
    music.play();
    video.play();
    thumb.style.display="none"; // hide thumbnail
    running=true;
    visual();
    btn.innerText="‚è∏ Pause";
  }else{
    music.pause();
    video.pause();
    running=false;
    btn.innerText="‚ñ∂Ô∏è Play";
  }
};

/* ===== RECORD VIDEO + AUDIO ===== */
let recorder,chunks=[];
record.onclick=()=>{
  recording=true;
  chunks=[];
  const vStream=video.captureStream();
  const aStream=music.captureStream();
  const mixed=new MediaStream([
    ...vStream.getVideoTracks(),
    ...aStream.getAudioTracks()
  ]);

  recorder=new MediaRecorder(mixed,{mimeType:"video/webm"});
  recorder.start();
  record.innerText="‚è∫ Recording...";

  recorder.ondataavailable=e=>chunks.push(e.data);
  setTimeout(()=>recorder.stop(),20000);

  recorder.onstop=()=>{
    const blob=new Blob(chunks,{type:"video/webm"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download="GoodByeMumbai_SmoothNeon.webm";
    a.click();
    URL.revokeObjectURL(url);
    record.innerText="‚¨áÔ∏è Download ";
    recording=false;
  };
};
</script>

</body>
</html>
  color:white;
  height:100vh;
  overflow:hidden;
}

/* BACKGROUND VIDEO */
.gif-bg{
  position:fixed;
  inset:0;
  opacity:0.55;
  z-index:-3;
}
.gif-bg video{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* NEON */
.neon{
  position:fixed;
  top:0;
  width:14px;
  height:100vh;
  filter:blur(8px);
  opacity:.25;
}
.neon.left{left:0;}
.neon.right{right:0;}

/* BOX */
.box{
  position:fixed;
  top:8px;left:50%;
  transform:translateX(-50%);
  width:94%;max-width:720px;
  background:rgba(0,0,0,.6);
  border-radius:18px;
  padding:16px;
  text-align:center;
  z-index:20;
}
h1{font-size:28px;}
#timer{margin:12px 0;font-size:18px;font-weight:bold;}
button{
  padding:12px 26px;
  border:none;
  border-radius:30px;
  background:#ff9800;
  font-weight:bold;
  font-size:18px;
}
#volumeSlider{width:100%;margin-top:10px;}
#secretMsg{display:none;color:#ffb74d;margin-top:8px}
</style>
</head>

<body>

<div class="neon left"></div>
<div class="neon right"></div>

<div class="gif-bg">
  <video autoplay muted loop playsinline>
    <source src="ek-mulakat-jaruri-hai-sanam.mp4">
  </video>
</div>

<div class="box">
  <h1 id="typing"></h1>
  <div id="timer">Loading...</div>

  <button id="playBtn">‚ñ∂Ô∏è Play</button>
  <input id="volumeSlider" type="range" min="0" max="100" value="60">

  <div id="secretMsg">üíå Hydrabad sirf shehar nahi‚Ä¶ ek jazba tha</div>
</div>

<audio id="music" loop>
  <source src="ghar-more-pardesiya.mp3">
</audio>

<script>
/* MUSIC */
const music = document.getElementById("music");
const btn = document.getElementById("playBtn");
const slider = document.getElementById("volumeSlider");
music.volume = .6;
slider.oninput = () => music.volume = slider.value / 100;

/* AUDIO ANALYSER */
const AudioContext = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioContext();
const src = audioCtx.createMediaElementSource(music);
const analyser = audioCtx.createAnalyser();
src.connect(analyser);
analyser.connect(audioCtx.destination);
analyser.fftSize = 128;
const data = new Uint8Array(analyser.frequencyBinCount);

const neonL = document.querySelector(".neon.left");
const neonR = document.querySelector(".neon.right");
const secretMsg = document.getElementById("secretMsg");

let smoothBass = 0, beat = 0, unlocked = false, hue = 0;

/* SYNC */
function sync(){
  analyser.getByteFrequencyData(data);
  const bass = (data[2] + data[3] + data[4]) / 3;
  smoothBass += (bass - smoothBass) * .15;

  hue = (hue + 1) % 360;
  const color = `hsl(${hue},100%,60%)`;

  neonL.style.background = color;
  neonR.style.background = color;

  if(smoothBass > 110){
    beat++;
    vibrate();
    if(beat > 6 && !unlocked){
      secretMsg.style.display = "block";
      unlocked = true;
    }
  }
  requestAnimationFrame(sync);
}

/* BUTTON */
let playing = false;
btn.onclick = () => {
  if(!playing){
    audioCtx.resume();
    music.play();
    sync();
    btn.innerHTML = "‚è∏ Pause";
    playing = true;
  }else{
    music.pause();
    btn.innerHTML = "‚ñ∂Ô∏è Play";
    playing = false;
  }
};

/* TYPING */
const text = "üíîGood Bye Hydrabadüíî";
let i = 0;
const typingEl = document.getElementById("typing");
(function type(){
  if(i < text.length){
    typingEl.innerHTML += text[i++];
    setTimeout(type,120);
  }
})();

/* TIMER */
const target = new Date("January 17, 2026 00:00:00").getTime();
setInterval(()=>{
  const diff = target - Date.now();
  if(diff <= 0){
    timer.innerHTML = "üåÜGood Bye Hydrabad";
    return;
  }
  const d = Math.floor(diff / 864e5);
  const h = Math.floor(diff / 36e5) % 24;
  const m = Math.floor(diff / 6e4) % 60;
  const s = Math.floor(diff / 1000) % 60;
  timer.innerHTML = `${d} ‡§¶‡§ø‡§® : ${h} ‡§ò‡§Ç‡§ü‡•á : ${m} ‡§Æ‡§ø‡§®‡§ü : ${s} ‡§∏‡•á‡§ï‡§Ç‡§°`;
},1000);
</script>

</body>
</html>
